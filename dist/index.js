(()=>{const e=25,t=600;let r=300;const n=document.querySelector("#startBtn"),o=document.querySelector("#stopBtn"),l=document.querySelector("#canvas").getContext("2d"),c=document.querySelector("#score");let i,a=[],d=[];n.addEventListener("click",(function(){r=300,i=setInterval(w,r),h(),s=0,c.innerHTML=s+""})),o.addEventListener("click",v);let f=[300,300],u=[0,1],s=1;function w(){y(),l.fillStyle="green",l.strokeStyle="white",f[0]+=e*u[0],f[1]+=e*u[1],f[0]===d[0]&&f[1]===d[1]&&(h(),r/=r<100?1.08:1.25,clearInterval(i),i=setInterval(w,r),s++,c.innerHTML=s+"",!0)||a.splice(0,1),(f[0]<0||f[0]>=t||f[1]<0||f[1]>=t||function(){for(let e of a)if(e[0]===f[0]&&e[1]===f[1])return!0;return!1}())&&(v(),alert("Game over.")),a.push([f[0],f[1]]);for(let t of a)l.fillRect(t[0],t[1],e,e),l.strokeRect(t[0],t[1],e,e);l.fillStyle="red",l.fillRect(d[0],d[1],e,e)}function v(){f=[300,300],clearInterval(i),a=[],y()}function y(){l.fillStyle="white",l.clearRect(0,0,t,t)}function h(){const t=Math.floor(24*Math.random())*e,r=Math.floor(24*Math.random())*e;d=[t,r]}window.addEventListener("keydown",(e=>{"ArrowUp"===e.code&&0===u[1]?u=[0,-1]:"ArrowDown"===e.code&&0===u[1]?u=[0,1]:"ArrowLeft"===e.code&&0===u[0]?u=[-1,0]:"ArrowRight"===e.code&&0===u[0]&&(u=[1,0])}))})();